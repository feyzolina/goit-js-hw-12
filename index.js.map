{"version":3,"file":"index.js","sources":["../src/js/init.js","../src/main.js"],"sourcesContent":["window.global ||= window;","import './js/init';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from 'axios';\n\nlet page = 1;\nlet perPage = 40;\nconst searchForm = document.querySelector('#searchForm');\nconst galleryDiv = document.querySelector('#gallery');\nconst loadingSpinnerDiv = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('#loadMoreBtn');\n\n\nsearchForm.addEventListener('submit', async function (event) {\n  event.preventDefault();\n\n  const search = document.querySelector('#search').value;\n  const apiKey = '48254147-b4b10b5266c157a9a3946e15d';\n\n  loadingSpinnerDiv.style.display = 'block';\n\n  try {\n\n    const posts = await fetchPosts(search);\n    renderPosts(posts);\n    page += 1;\n\n    if (page > 1) {\n      loadMoreBtn.style.display = 'block';\n    }\n  } catch (error) {\n    iziToast.error({\n      message: 'Sorry, there are no images matching your search query. Please try again!',\n      position: 'topRight'\n    });\n  } finally {\n    loadingSpinnerDiv.style.display = 'none';\n  }\n});\n\nasync function fetchPosts(search) {\n  const searchParams = new URLSearchParams({\n    q: search,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: perPage,\n    page: page\n  });\n  const url = `https://pixabay.com/api/?key=48254147-b4b10b5266c157a9a3946e15d&${searchParams.toString()}`;\n  const response = await axios.get(url);\n  return response.data.hits;\n}\n\n\nfunction renderPosts(images) {\n  const galleryContent = images\n    .map(image => {\n      return `\n        <a href=\"${image.largeImageURL}\" class=\"image-card\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n          <div class=\"image-info\">\n            <div class=\"likes\">\n              <p class=\"likes-text\">Likes</p>\n              <p class=\"likes-count\">${image.likes}</p>\n            </div>\n            <div class=\"views\">\n              <p class=\"views-text\">Views</p>\n              <p class=\"views-count\">${image.views}</p>\n            </div>\n            <div class=\"comments\">\n              <p class=\"comments-text\">Comments</p>\n              <p class=\"comments-count\">${image.comments}</p>\n            </div>\n            <div class=\"downloads\">\n              <p class=\"downloads-text\">Downloads</p>\n              <p class=\"downloads-count\">${image.downloads}</p>\n            </div>\n          </div>\n        </a>\n      `;\n    }).join('');\n\n  galleryDiv.innerHTML = galleryContent;\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250\n  });\n  lightbox.refresh();\n}\n\n\nloadMoreBtn.addEventListener('click', async function () {\n  const search = document.querySelector('#search').value;\n  loadMoreBtn.textContent = 'Loading...';\n  try {\n\n    const posts = await fetchPosts(search);\n    renderPosts(posts);\n    page += 1;\n  } catch (error) {\n    iziToast.error({\n      message: 'Sorry, there are no more images available.',\n      position: 'topRight'\n    });\n  } finally {\n    loadMoreBtn.textContent = 'Load More';\n  }\n});\n\n\n\n// const lightbox = new SimpleLightbox('.gallery a', {\n//   captionsData: 'alt',\n//   captionDelay: 250\n// });\n\n// document.querySelector('#searchForm').addEventListener('submit', function (event) {\n//   event.preventDefault();\n//   const search = document.querySelector('#search').value;\n//   const apiKey = '48254147-b4b10b5266c157a9a3946e15d';\n\n//   const loadingSpinnerDiv = document.querySelector('.loader');\n//   loadingSpinnerDiv.style.display = 'block';\n\n//   const searchParams = new URLSearchParams({\n//     q: search,\n//     image_type: 'photo',\n//     orientation: 'horizontal',\n//     safesearch: true\n//   });\n\n//   const url = `https://pixabay.com/api/?key=${apiKey}&${searchParams.toString()}`;\n\n//   fetch(url)\n//     .then(response => {\n//       if (!response.ok) {\n//         throw new Error(response.status);\n//       }\n//       return response.json();\n//     })\n//     .then(data => {\n//       console.log(data);\n\n//       const galleryDiv = document.querySelector('#gallery');\n//       galleryDiv.innerHTML = '';\n\n//       if (data.hits && data.hits.length > 0) {\n//         const galleryContent = data.hits.map(image => {\n//           return `\n//             <a href=\"${image.largeImageURL}\" class=\"image-card\">\n//               <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n//               <div class=\"image-info\">\n//                 <div class=\"likes\">\n//                   <p class=\"likes-text\">Likes</p>\n//                   <p class=\"likes-count\">${image.likes}</p>\n//                 </div>\n//                 <div class=\"views\">\n//                   <p class=\"views-text\">Views</p>\n//                   <p class=\"views-count\">${image.views}</p>\n//                 </div>\n//                 <div class=\"comments\">\n//                   <p class=\"comments-text\">Comments</p>\n//                   <p class=\"comments-count\">${image.comments}</p>\n//                 </div>\n//                 <div class=\"downloads\">\n//                   <p class=\"downloads-text\">Downloads</p>\n//                   <p class=\"downloads-count\">${image.downloads}</p>\n//                 </div>\n//               </div>\n//             </a>\n//           `;\n//         }).join('');\n\n//         galleryDiv.innerHTML = galleryContent;\n//         lightbox.refresh();\n//       } else {\n//         iziToast.error({\n//           message: 'Sorry, there are no images matching your search query. Please try again!',\n//           position: 'topRight'\n//         });\n//       }\n\n//       loadingSpinnerDiv.style.display = 'none';\n\n//       document.querySelector('#searchForm').reset();\n//     })\n//     .catch(error => {\n//       console.error('API request error:', error);\n//     });\n// });\n\n\n\n"],"names":["page","perPage","searchForm","galleryDiv","loadingSpinnerDiv","loadMoreBtn","event","search","posts","fetchPosts","renderPosts","iziToast","url","axios","images","galleryContent","image","SimpleLightbox"],"mappings":"owBAAA,OAAO,SAAP,OAAO,OAAW,QCOlB,IAAIA,EAAO,EACPC,EAAU,GACd,MAAMC,EAAa,SAAS,cAAc,aAAa,EACjDC,EAAa,SAAS,cAAc,UAAU,EAC9CC,EAAoB,SAAS,cAAc,SAAS,EACpDC,EAAc,SAAS,cAAc,cAAc,EAGzDH,EAAW,iBAAiB,SAAU,eAAgBI,EAAO,CAC3DA,EAAM,eAAc,EAEpB,MAAMC,EAAS,SAAS,cAAc,SAAS,EAAE,MAGjDH,EAAkB,MAAM,QAAU,QAElC,GAAI,CAEF,MAAMI,EAAQ,MAAMC,EAAWF,CAAM,EACrCG,EAAYF,CAAK,EACjBR,GAAQ,EAEJA,EAAO,IACTK,EAAY,MAAM,QAAU,QAE/B,MAAe,CACdM,EAAS,MAAM,CACb,QAAS,2EACT,SAAU,UAChB,CAAK,CACL,QAAY,CACRP,EAAkB,MAAM,QAAU,MACnC,CACH,CAAC,EAED,eAAeK,EAAWF,EAAQ,CAShC,MAAMK,EAAM,mEARS,IAAI,gBAAgB,CACvC,EAAGL,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUN,EACV,KAAMD,CACV,CAAG,EAC2F,SAAQ,CAAE,GAEtG,OADiB,MAAMa,EAAM,IAAID,CAAG,GACpB,KAAK,IACvB,CAGA,SAASF,EAAYI,EAAQ,CAC3B,MAAMC,EAAiBD,EACpB,IAAIE,GACI;AAAA,mBACMA,EAAM,aAAa;AAAA,sBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,uCAIrBA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,uCAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,0CAIRA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,2CAIbA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,OAKrD,EAAE,KAAK,EAAE,EAEZb,EAAW,UAAYY,EACN,IAAIE,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAClB,CAAG,EACQ,QAAO,CAClB,CAGAZ,EAAY,iBAAiB,QAAS,gBAAkB,CACtD,MAAME,EAAS,SAAS,cAAc,SAAS,EAAE,MACjDF,EAAY,YAAc,aAC1B,GAAI,CAEF,MAAMG,EAAQ,MAAMC,EAAWF,CAAM,EACrCG,EAAYF,CAAK,EACjBR,GAAQ,CACT,MAAe,CACdW,EAAS,MAAM,CACb,QAAS,6CACT,SAAU,UAChB,CAAK,CACL,QAAY,CACRN,EAAY,YAAc,WAC3B,CACH,CAAC"}